<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <!-- JQuery link: -->
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
    <!-- Compiled and minified CSS -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/materialize/1.0.0-beta/css/materialize.min.css">
    <!-- Compiled and minified JavaScript -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/materialize/1.0.0-beta/js/materialize.min.js"></script>
    <!-- Firebase -->
    <script src="https://www.gstatic.com/firebasejs/4.12.1/firebase.js"></script>
    <!-- <link rel="stylesheet" href="../public/css/style.css"> -->
    <title>Pet Finder</title>
    <title>Cats</title>
</head>

<body>
    <ul id="dropdown1" class="dropdown-content">
        <li>
            <a href="#!">one</a>
        </li>
        <li>
            <a href="#!">two</a>
        </li>
        <li class="divider"></li>
        <li>
            <a href="#!">three</a>
        </li>
    </ul>
    <nav>
        <div class="nav-wrapper">
            <a href="index.html" class="brand-logo">PetFinder</a>
            <ul class="right hide-on-med-and-down">
                <li>
                    <a href="cat.html">Cats</a>
                </li>
                <li>
                    <a href="dog.html">Dogs</a>
                </li>
                <!-- Dropdown Trigger -->
                <li>
                    <a class="dropdown-trigger" href="#!" data-target="dropdown1">Dropdown
                        <i class="material-icons left">send</i>
                    </a>
                </li>
            </ul>
        </div>
    </nav>

    <div class="container">
        <div class="row">
            <h2>Log In/Sign up</h2>
            <div class="row">
                <div class="input-field col s6">
                    <input id="email" type="email">
                    <label for="email">Email</label>
                </div>
                <div class="input-field col s6">
                    <input id="password" type="password">
                    <label for="password">Password</label>
                </div>
                <button id= "btnLogin" class="btn waves-effect waves-light" type="submit" name="action">Log in</button>
                <button id= "btnSignup" class="btn waves-effect waves-light" type="submit" name="action">Sign up</button>
                <button id= "btnLogout" class="btn waves-effect waves-light" type="submit" name="action">Log out</button>

            </div>
        </div>
    </div>

    <footer class="page-footer">
        <div class="container">
            <div class="row">
                <div class="col l6 s12">
                    <h5 class="red-text">Project 2 PetFinder</h5>
                    <p class="black-text text-lighten-4">You can use rows and columns here to organize your footer content.</p>
                </div>
                <div class="col l4 offset-l2 s12">
                    <h5 class="black-text">GitHub Repo</h5>
                    <ul>
                        <li>
                            <a class="black-text text-lighten-3" href="#!">GitHub</a>
                        </li>
                        <li>
                            <a class="black-text text-lighten-3" href="#!">GitHub 2</a>
                        </li>
                        <li>
                            <a class="black-text text-lighten-3" href="#!">GitHub 3</a>
                        </li>
                        <li>
                            <a class="black-text text-lighten-3" href="#!">GitHub 4</a>
                        </li>
                    </ul>
                </div>
            </div>
        </div>
        <div class="footer-copyright">
            <div class="container">
                Â© 2018 Copyright Text
                <a class="black-text text-lighten-4 right" href="#!">More Links</a>
            </div>
        </div>
    </footer>
    <script src="./js.js"></script>
    

<script>

</script>


<script src="https://www.gstatic.com/firebasejs/4.12.1/firebase.js"></script>
<script>

(function () {


  // Initialize Firebase
  var config = {
    apiKey: "AIzaSyAajT85QVVMjcU3YEe3pV4Ahakuta76vbk",
    authDomain: "pet-finder-a8ffa.firebaseapp.com",
    databaseURL: "https://pet-finder-a8ffa.firebaseio.com",
    projectId: "pet-finder-a8ffa",
    storageBucket: "pet-finder-a8ffa.appspot.com",
    messagingSenderId: "270260512944"
  };
  firebase.initializeApp(config);
    
    //get elements
    const txtEmail = document.getElementById("email");
    const txtPassword = document.getElementById("password");
    const btnLogin = document.getElementById("btnLogin");
    const btnSignup = document.getElementById("btnSignup");

    //add login event
    btnLogin.addEventListener("click", e => {
        const email = txtEmail.value;
        const pass = txtPassword.value;
        const auth = firebase.auth();
        //sign in 
        const promise = auth.signInWithEmailAndPassword(email, pass);
        promise.catch(e => console.log(e.message));

    }); 
    btnSignup.addEventListener("click", e=> {
        //TODO: check 4 real email
        const email = txtEmail.value;
        const pass = txtPassword.value;
        const auth = firebase.auth();
        //sign up 
        const promise = auth.createUserWithEmailAndPassword(email, pass);
        promise
        .catch(e => console.log(e.message));
    });

    btnLogout.addEventListener("click", e => {
        firebase.auth().signOut();
    });

    firebase.auth().onAuthStateChanged(firebaseUser => {
        if (firebaseUser) {
            console.log(firebaseUser);
            // window.location = "index.html";
        } else {
            console.log("not logged in")
        }
    });

}());

</script>
</body>

</html>